# 标注功能（Drawing / Annotation）

文档标注功能用于在文档页面上进行临时的“涂写 / 划线 / 框选 / 擦除”等可视化标记，适用于讲解、评审、协作讨论等场景。标注模式在演示模式下也可以使用，方便进行演示讲解。

## 功能特性

- 文档标注：可缩放、可序列化、支持撤销/重做
- 多种工具：手写笔、直线、矩形、圆形、橡皮擦
- 颜色与粗细：支持调整画笔颜色与线条粗细
- 协作同步：协作模式下画布内容实时同步，且可同步当前标注人信息
- 编辑保护：协作模式下有人开启标注时，其他客户端会收到提示并进入只读以避免冲突

## 效果截图

（待补充）

## 演示视频

（待补充）

## 使用说明

### 入口

- 页面右下角悬浮按钮（画笔图标）用于开启/关闭标注模式
- 开启后会出现标注工具栏，可进行工具选择、调整颜色与粗细、撤销/重做、清空与关闭等

### 工具栏说明
∂
- 撤销 / 重做：回退或恢复标注操作
- 颜色：设置画笔颜色
- 线条类型：选择标注工具（手写笔/直线/矩形/圆形/橡皮擦）
- 粗细：调整线条粗细
- 清空：清除当前画布内容
- 关闭：退出标注模式

### 演示模式可用

开启演示模式后，编辑器通常会进入只读以避免误编辑，但标注层仍然可用：

- 你可以在演示过程中直接使用标注进行讲解
- 结束标注后关闭标注模式即可

## 协作模式说明

当开启协作时：

- 画布内容会在协作客户端之间实时同步
- 当前标注人信息会同步，并在工具栏中展示
- 当任意协作者开启标注模式时，其他协作者会收到提示，并且编辑器会切换为只读状态
- 当标注模式关闭后，会恢复编辑能力（如果当前未处于演示模式且文档本身不是只读）

## 配置项示例
```js
const defaultOptions = {
  // 文档标注相关配置
  annotation: {
    enabled: true,
    defaultColor: '#ff4d4f',
    defaultSize: 3,
  }
}
```

## 配置项说明

### annotation.enabled

**说明**：是否启用标注功能。关闭后入口按钮不会显示。

**类型**：`Boolean`

**默认值**：`true`

### annotation.defaultColor

**说明**：默认画笔颜色。

**类型**：`String` 

**默认值**：`#ff4d4f`

### annotation.defaultSize

**说明**：默认画笔粗细。

**类型**：`Number`

**默认值**：`3`

## 方法列表

### openAnnotation

**说明**：打开文档标注工具栏。

**参数**：无。

**返回值**：无

### closeAnnotation

**说明**：关闭文档标注工具栏。

**参数**：无。

**返回值**：无
